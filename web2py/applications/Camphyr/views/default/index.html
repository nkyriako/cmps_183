{{extend 'layout.html'}}

{{block header}}

{{end}}
<body>
	<div class="no_user_logged_in" >
		{{if auth.user is None:}}
			<div class="logo">
				<div id="logo" style="text-shadow:2px 2px #ff0000;">Camphyr</div>
			</div>
			<div class="login_buttons">
				<a href="{{=URL('default', 'user')}}" class="large" style="color:orange; font-size:25px">Login</a>
				&nbsp;&nbsp;
				<a href="{{=URL('default', 'user', args='register', vars={'_next': request.vars._next} if request.vars._next else None)}}" class="large" style="color:orange;font-size:25px">Sign Up</a>
			</div>
			<br>
			<div id="highlight_box" class="container about_camphyr">
				<div class="half center">
					<br>
					<h4 style="color:white">Collaborative Storytelling</h4>
					<br>
					<p style="color:white;">Camphyr (pronounced CAMP-fer) is a website that allows people to let loose with their creative side and practice the art of writing. On Camphyr, users are able to create, add to, and finish stoires. The goal is for users to unite and collaborate in or order to produce creative stories. </p>
					<br>
					<h5 style="color:white">Jump in and start storytelling!</h5>
				</div>
				<div class="half center">
					<img src="/Camphyr/static/images/campfire.png"/>
				</div>
			</div>
			<br>
			<h3 style="color:orange;">How does Camphyr work?</h3>
			<div class="container how_to_use_camphyr">
				<div class="third" id="match_image">
					<h3 class="center" style="color:white">Create a new story</h3>
					<p style="color:white;font-size:20px">Have a new idea for a story? Click the "Create a Story" button, come up with a title and add the first snippet to your story. Hit create and now your story will be listed for others to add to it! You can always check back in on your stories by going to your personal profile page. </p>
				</div>
				<div class="third" id="log_image">
					<h3 class="center" style="color:white">Add to a story</h3>
					<p style="color:white;font-size:20px">See a story that interests you? Click on the story title and you can read how the story has been developed so far. Continue the story by clicking "Add a snippet"! When a story has reached a certain length, there will also be the option to finish the story.</p>
				</div>
				<div class="third" id="user_image">
					<h3 class="center" style="color:white;">User profiles </h3>
					<p style="color:white;font-size:20px">On your personal profile page you can view stories that you have created or contributed to. Check back in on stories to see how they have progressed! Also, users have the option to write long individual stories that can be shared with others in the Camphyr community.
				</div>
			</div>
			<div class="most_recent_stories">
				<h3 class="center" style="color:orange;">Check out some stories below!</h3>
				{{for name in db(db.story.ishead==True).select(limitby = (0, 5)):}}
					<div id = 'snippet' style="background-color:white;border-color:orange">
		       			<h4 style="color:gray;font-size:30px;font-weight:bold">{{=name.title}}</h4>
		        		<div>
							<text style="color:#d2b48c;">Created by:</text>
	                		<text style="color:#d2b48c;">{{=name.user_email}}</text>
	                	</div> 
	                	<div>
	                		<text style="color:gray">Intro:</text>
	                	</div>
	                	<div id = 'text'>{{=name.snippets}}</div> 
	                </div>
	                {{pass}}
			</div>
	</div>
	<div class="user_logged_in">
		{{else:}}
			<div class="logo">
				<div id="logo" style="text-shadow:2px 2px #ff0000;">Camphyr</div>
			</div>
			<div class="container compressible">
				<div class="recent_stories twothirds" id="highlight_box">
					<h4 style="color:white">Recently created stories:</h4>
					{{for name in db(db.story.ishead==True).select(limitby = (0, 10)):}}
						<div id = 'snippet' style="background-color:white;border-color:orange">
							{{link2 = URL('default', 'sample_story_page', vars = dict(story_id = name.storyId))}}
		        			<a style="color:gray;font-size:30px;font-weight:bold" href = '{{=link2}}'>{{=name.title}}</a>
		        			<div>
								<text style="color:#d2b48c;">Created by:</text>
								{{poster = db(db.user_profile.user_email == name.user_email).select().first()
									link = URL('default', 'user_profile', vars = dict(user_id = poster.id))}}
	                			<a style="color:#d2b48c;" href = '{{=link}}'>{{=name.user_email}}</a>
	                		</div> 
	                		<div>
	                			<text style="color:gray">Intro:</text>
	                		</div>
	                		<div id = 'text'>{{=name.snippets}}</div> 
	                	</div>
	                {{pass}}
				</div>
				<div class="featured quarter center" id="orange_box" style="border:inset;border-color:white;border-width:20px;margin-left:60px;opacity:.8">
					<div style="background-color:orange;">
						<h3 style="color:white">Hello {{=auth.user.first_name}}!</h3>
						<h5 style="color:white">View your user profile:</h5>
						<br>
						<a href="{{=URL('default', 'user_profile')}}" class="btn">Your User Profile</a>
					</div>
					<div>
						<br>
						<div class="strip" style="width:100%;height:5px;border-style:solid;border-color:white;background-color:rgb(255,98,104);">
						</div>
						<h3 style="color:white">Create a new story:</h3>
						<div id="story" style="font-weight:bold;">{{=story}}</div>
					</div>
					<div>
						<br>
						<div class="strip" style="width:100%;height:5px;border-style:solid;border-color:white;background-color:rgb(255,98,104);">
						</div>
						<h3 style="color:white">Search for other stories:</h3>
						<form action="searches.html" method ="get">
				    		<input type="text" name="search" placeholder="Search story titles..."/>
				    		<br><br>
				    		<input type="submit" value="Search"/>
						</form>
					</div>
				</div>
			</div>
		{{pass}}
	</div>
</body>
